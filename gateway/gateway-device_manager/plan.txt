
# Device manager task: Listens to incoming MQTT from Chirpstack, converts from zigbee2mqtt to LoRaBridge, and keeps record of devices


Device manager pseudo:

- Parse incoming zigbee2mqtt message:

- IF DevID in device database (redis hash -> "lorabridge:device_manager", eintrag ieee id: json string)
  
  -> No: Save device in database (generate JSON*: friendly_name and supported measurements)
         publish -lorabridge- discovery message = entire JSON entry
  
  -> Yes: craft & publish state update message 
	 publish -lorabridge- state update message


# LoRaBridge Gateway Device Manager Entry:

*{
"friendly_name": "lorabridge_sensor"
"ieee": 0x123123123,
"ID": 1,
"measurement": {"temperature"}
}


# LoRaBridge Gateway Discovery MQTT Discovery message type:
#
# Topic: /lorabridge/discovery
#
# example:

/lorabridge/discovery -> {"ID": 1, "measurement": "temperature"}

# LoRaBridge Gateway Status update MQTT message type:
#
# Topic /lorabridge/state
# 
# example:

/lorabridge/state -> {"ID":1,"measurement":"temperature","value": 24.9}
